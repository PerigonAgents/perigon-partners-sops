<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Submit Meeting Transcript ‚Äî Perigon Partners</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <style>
    /* ‚îÄ‚îÄ PERIGON DESIGN TOKENS (matched from live site) ‚îÄ‚îÄ */
    :root {
      --navy:        #1a2b45;
      --navy-deep:   #142238;
      --navy-mid:    #243654;
      --navy-light:  #2e4268;
      --green:       #3dba6e;
      --green-dark:  #2fa05c;
      --green-dim:   rgba(61,186,110,0.1);
      --green-border:rgba(61,186,110,0.25);
      --white:       #ffffff;
      --body-bg:     #f4f5f7;
      --card-bg:     #ffffff;
      --text:        #1a2b45;
      --text-mid:    #4a5568;
      --text-muted:  #718096;
      --text-light:  #a0aec0;
      --border:      #e2e8f0;
      --border-mid:  #cbd5e0;
      --input-bg:    #f8fafc;
      --input-focus: #ebf5ff;
      --error:       #e53e3e;
      --error-bg:    #fff5f5;
      --warning-bg:  #fffbf0;
      --warning-border: #f6ad55;
      --radius:      8px;
      --radius-lg:   12px;
      --shadow:      0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
      --shadow-md:   0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      font-weight: 400;
      background: var(--body-bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* ‚îÄ‚îÄ HEADER (matches live site exactly) ‚îÄ‚îÄ */
    .site-header {
      background: var(--navy);
      padding: 0 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 64px;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .site-header img { height: 30px; }
    .back-link {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: rgba(255,255,255,0.6);
      text-decoration: none;
      transition: color 0.15s;
    }
    .back-link:hover { color: var(--white); }
    .back-link svg { width: 14px; height: 14px; }

    /* ‚îÄ‚îÄ PAGE HERO (matches SOP page green hero) ‚îÄ‚îÄ */
    .page-hero {
      background: var(--green);
      padding: 44px 40px 48px;
      position: relative;
      overflow: hidden;
    }
    .page-hero::before {
      content: '';
      position: absolute;
      top: -60px; right: -60px;
      width: 280px; height: 280px;
      border-radius: 50%;
      background: rgba(255,255,255,0.08);
    }
    .page-hero::after {
      content: '';
      position: absolute;
      bottom: -80px; right: 120px;
      width: 200px; height: 200px;
      border-radius: 50%;
      background: rgba(255,255,255,0.05);
    }
    .hero-eyebrow {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.75);
      margin-bottom: 10px;
    }
    .hero-title {
      font-size: 2rem;
      font-weight: 700;
      color: var(--white);
      line-height: 1.2;
      margin-bottom: 10px;
    }
    .hero-subtitle {
      font-size: 15px;
      color: rgba(255,255,255,0.8);
      max-width: 520px;
    }

    /* ‚îÄ‚îÄ PROGRESS TRACKER ‚îÄ‚îÄ */
    .progress-bar-wrap {
      background: var(--navy);
      padding: 0 40px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }
    .progress-steps {
      display: flex;
      max-width: 760px;
      margin: 0 auto;
    }
    .progress-step {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 16px 0;
      position: relative;
      cursor: default;
    }
    .progress-step:not(:last-child)::after {
      content: '';
      position: absolute;
      right: 0; top: 50%;
      width: 1px; height: 20px;
      background: rgba(255,255,255,0.1);
      transform: translateY(-50%);
    }
    .step-dot {
      width: 26px; height: 26px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.2);
      color: rgba(255,255,255,0.4);
      font-size: 11px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.3s;
    }
    .progress-step.active .step-dot {
      border-color: var(--green);
      background: var(--green);
      color: var(--white);
    }
    .progress-step.done .step-dot {
      border-color: var(--green);
      background: transparent;
      color: var(--green);
    }
    .progress-step.done .step-dot::before { content: '‚úì'; font-size: 13px; }
    .progress-step.done .step-dot span { display: none; }
    .step-label {
      font-size: 12px;
      font-weight: 500;
      color: rgba(255,255,255,0.35);
      transition: color 0.3s;
    }
    .progress-step.active .step-label { color: var(--white); }
    .progress-step.done .step-label   { color: var(--green); }

    /* ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ */
    .main {
      max-width: 840px;
      margin: 0 auto;
      padding: 40px 40px 100px;
    }

    /* ‚îÄ‚îÄ FORM PANEL ‚îÄ‚îÄ */
    .form-panel {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-md);
      overflow: hidden;
      margin-bottom: 20px;
    }
    .panel-header {
      padding: 22px 28px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .panel-icon {
      width: 36px; height: 36px;
      border-radius: 8px;
      background: var(--green-dim);
      border: 1px solid var(--green-border);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .panel-icon svg { width: 16px; height: 16px; color: var(--green); }
    .panel-title {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
    }
    .panel-subtitle {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 1px;
    }
    .panel-body { padding: 28px; }

    /* ‚îÄ‚îÄ FORM ELEMENTS ‚îÄ‚îÄ */
    .field-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
      margin-bottom: 18px;
    }
    .field-row.full { grid-template-columns: 1fr; }
    .field-row.three { grid-template-columns: 1fr 1fr 1fr; }

    .field { display: flex; flex-direction: column; gap: 6px; }
    .field-label {
      font-size: 13px;
      font-weight: 500;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .required { color: var(--green); font-size: 14px; }

    .field-input,
    .field-select,
    .field-textarea {
      width: 100%;
      padding: 10px 14px;
      border: 1.5px solid var(--border);
      border-radius: var(--radius);
      background: var(--input-bg);
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      color: var(--text);
      transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
      outline: none;
      -webkit-appearance: none;
    }
    .field-input:focus,
    .field-select:focus,
    .field-textarea:focus {
      border-color: var(--green);
      background: var(--input-focus);
      box-shadow: 0 0 0 3px var(--green-dim);
    }
    .field-input.error,
    .field-select.error,
    .field-textarea.error {
      border-color: var(--error);
      background: var(--error-bg);
    }
    .field-textarea { resize: vertical; min-height: 180px; line-height: 1.6; }
    .field-hint {
      font-size: 12px;
      color: var(--text-light);
      margin-top: 2px;
    }
    .field-error {
      font-size: 12px;
      color: var(--error);
      display: none;
    }
    .field-error.show { display: block; }

    /* Custom select arrow */
    .field-select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23718096' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 36px;
      cursor: pointer;
    }

    /* ‚îÄ‚îÄ ATTENDEE BUILDER ‚îÄ‚îÄ */
    .attendees-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 12px;
    }
    .attendee-row {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 10px;
      align-items: center;
    }
    .remove-attendee {
      width: 32px; height: 32px;
      border: 1.5px solid var(--border);
      border-radius: 6px;
      background: var(--white);
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.15s;
    }
    .remove-attendee:hover { border-color: var(--error); color: var(--error); background: var(--error-bg); }
    .remove-attendee svg { width: 14px; height: 14px; }
    .add-attendee-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      font-weight: 500;
      color: var(--green-dark);
      background: none;
      border: 1.5px dashed var(--green-border);
      border-radius: var(--radius);
      padding: 8px 14px;
      cursor: pointer;
      width: 100%;
      transition: all 0.15s;
    }
    .add-attendee-btn:hover { border-color: var(--green); background: var(--green-dim); }
    .add-attendee-btn svg { width: 14px; height: 14px; }

    /* ‚îÄ‚îÄ TRANSCRIPT AREA ‚îÄ‚îÄ */
    .transcript-wrap { position: relative; }
    .char-count {
      position: absolute;
      bottom: 10px; right: 12px;
      font-size: 11px;
      color: var(--text-light);
      pointer-events: none;
    }
    .char-count.warning { color: var(--warning-border); }

    /* ‚îÄ‚îÄ TYPE SELECTOR (Internal / Client toggle) ‚îÄ‚îÄ */
    .type-toggle {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .type-option {
      position: relative;
      cursor: pointer;
    }
    .type-option input[type="radio"] {
      position: absolute; opacity: 0; width: 0; height: 0;
    }
    .type-card {
      border: 1.5px solid var(--border);
      border-radius: var(--radius);
      padding: 14px 16px;
      background: var(--input-bg);
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.15s;
      cursor: pointer;
    }
    .type-option input:checked + .type-card {
      border-color: var(--green);
      background: var(--green-dim);
    }
    .type-card-icon {
      width: 32px; height: 32px;
      border-radius: 6px;
      background: var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-size: 16px;
    }
    .type-card-text strong { font-size: 13px; font-weight: 600; display: block; color: var(--text); }
    .type-card-text span { font-size: 12px; color: var(--text-muted); }

    /* ‚îÄ‚îÄ PLATFORM SELECTOR ‚îÄ‚îÄ */
    .platform-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    .platform-option { position: relative; cursor: pointer; }
    .platform-option input[type="radio"] { position: absolute; opacity: 0; width: 0; height: 0; }
    .platform-card {
      border: 1.5px solid var(--border);
      border-radius: var(--radius);
      padding: 12px;
      background: var(--input-bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      text-align: center;
      transition: all 0.15s;
      cursor: pointer;
    }
    .platform-option input:checked + .platform-card {
      border-color: var(--green);
      background: var(--green-dim);
    }
    .platform-logo { font-size: 22px; }
    .platform-name { font-size: 12px; font-weight: 500; color: var(--text-mid); }

    /* ‚îÄ‚îÄ CALLOUT ‚îÄ‚îÄ */
    .callout {
      display: flex;
      gap: 12px;
      padding: 14px 16px;
      border-radius: var(--radius);
      font-size: 13px;
      line-height: 1.5;
      margin-bottom: 18px;
    }
    .callout.info { background: var(--green-dim); border: 1px solid var(--green-border); color: var(--text); }
    .callout.warning { background: var(--warning-bg); border: 1px solid var(--warning-border); color: var(--text); }
    .callout-icon { flex-shrink: 0; font-size: 16px; margin-top: 1px; }

    /* ‚îÄ‚îÄ STEP NAVIGATION ‚îÄ‚îÄ */
    .step-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      margin-top: 24px;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 11px 22px;
      border-radius: var(--radius);
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
      border: none;
      text-decoration: none;
    }
    .btn svg { width: 16px; height: 16px; }
    .btn-primary {
      background: var(--green);
      color: var(--white);
    }
    .btn-primary:hover { background: var(--green-dark); }
    .btn-primary:disabled { background: var(--text-light); cursor: not-allowed; }
    .btn-ghost {
      background: transparent;
      color: var(--text-muted);
      border: 1.5px solid var(--border);
    }
    .btn-ghost:hover { color: var(--text); border-color: var(--border-mid); }
    .btn-submit {
      background: var(--navy);
      color: var(--white);
      padding: 13px 28px;
      font-size: 15px;
    }
    .btn-submit:hover { background: var(--navy-mid); }
    .btn-submit:disabled { background: var(--text-light); cursor: not-allowed; }

    /* ‚îÄ‚îÄ STEP PAGES ‚îÄ‚îÄ */
    .step-page { display: none; }
    .step-page.active { display: block; }

    /* ‚îÄ‚îÄ SUCCESS STATE ‚îÄ‚îÄ */
    #success-screen {
      display: none;
      text-align: center;
      padding: 60px 40px;
    }
    .success-icon {
      width: 72px; height: 72px;
      border-radius: 50%;
      background: var(--green-dim);
      border: 2px solid var(--green);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      font-size: 32px;
    }
    #success-screen h2 { font-size: 1.5rem; font-weight: 700; color: var(--text); margin-bottom: 10px; }
    #success-screen p { color: var(--text-muted); font-size: 15px; max-width: 440px; margin: 0 auto 32px; line-height: 1.7; }
    .success-detail {
      background: var(--input-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px 20px;
      margin: 0 auto 32px;
      max-width: 440px;
      text-align: left;
      font-size: 13px;
      color: var(--text-mid);
      line-height: 1.7;
    }
    .success-detail strong { color: var(--text); font-weight: 600; }

    /* ‚îÄ‚îÄ SIDEBAR SUMMARY ‚îÄ‚îÄ */
    .layout { display: grid; grid-template-columns: 1fr 280px; gap: 24px; align-items: start; }
    .sidebar { position: sticky; top: 80px; }
    .summary-card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .summary-header {
      background: var(--navy);
      padding: 14px 18px;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.6);
    }
    .summary-body { padding: 18px; }
    .summary-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
    }
    .summary-row:last-child { border-bottom: none; }
    .summary-key { color: var(--text-muted); flex-shrink: 0; }
    .summary-val { color: var(--text); font-weight: 500; text-align: right; }
    .summary-val.empty { color: var(--text-light); font-style: italic; font-weight: 400; }

    .tip-card {
      margin-top: 16px;
      background: var(--green-dim);
      border: 1px solid var(--green-border);
      border-radius: var(--radius);
      padding: 14px 16px;
      font-size: 12px;
      color: var(--text-mid);
      line-height: 1.6;
    }
    .tip-card strong { color: var(--green-dark); display: block; margin-bottom: 4px; font-size: 11px; text-transform: uppercase; letter-spacing: 0.06em; }

    /* ‚îÄ‚îÄ SPINNER ‚îÄ‚îÄ */
    .spinner {
      width: 18px; height: 18px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: var(--white);
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
      display: none;
    }
    .spinner.show { display: block; }
    @keyframes spin { to { transform: rotate(360deg); } }

    @media (max-width: 720px) {
      .layout { grid-template-columns: 1fr; }
      .sidebar { display: none; }
      .site-header { padding: 0 20px; }
      .page-hero { padding: 32px 20px 36px; }
      .progress-bar-wrap { padding: 0 20px; }
      .main { padding: 24px 20px 80px; }
      .panel-body { padding: 20px; }
      .field-row { grid-template-columns: 1fr; }
      .field-row.three { grid-template-columns: 1fr; }
      .platform-grid { grid-template-columns: 1fr 1fr 1fr; }
      .attendee-row { grid-template-columns: 1fr auto; }
      .attendee-row .field:last-of-type { display: none; }
      .hero-title { font-size: 1.5rem; }
    }
  </style>
</head>
<body>

<!-- ‚îÄ‚îÄ SITE HEADER ‚îÄ‚îÄ -->
<header class="site-header">
  <img src="https://cdn.prod.website-files.com/688cc4f9806ddae7e1e220e9/688cd5dbb1b1f69db17f0f05_Perigon%20Logo%20Large%20White%20Cropped.png" alt="Perigon Partners" />
  <a href="/" class="back-link">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
    All SOPs
  </a>
</header>

<!-- ‚îÄ‚îÄ PAGE HERO ‚îÄ‚îÄ -->
<div class="page-hero">
  <div class="hero-eyebrow">Meeting Note System ¬∑ Manual Entry</div>
  <h1 class="hero-title">Submit Meeting Transcript</h1>
  <p class="hero-subtitle">Use this form when Fireflies didn't automatically capture your meeting. Your notes will be generated and emailed to all attendees within a few minutes.</p>
</div>

<!-- ‚îÄ‚îÄ PROGRESS TRACKER ‚îÄ‚îÄ -->
<div class="progress-bar-wrap">
  <div class="progress-steps">
    <div class="progress-step active" id="prog-1">
      <div class="step-dot"><span>1</span></div>
      <div class="step-label">Meeting details</div>
    </div>
    <div class="progress-step" id="prog-2">
      <div class="step-dot"><span>2</span></div>
      <div class="step-label">Attendees</div>
    </div>
    <div class="progress-step" id="prog-3">
      <div class="step-dot"><span>3</span></div>
      <div class="step-label">Transcript</div>
    </div>
    <div class="progress-step" id="prog-4">
      <div class="step-dot"><span>4</span></div>
      <div class="step-label">Review &amp; submit</div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ -->
<main class="main">
  <div id="form-layout" class="layout">

    <!-- LEFT: FORM -->
    <div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STEP 1: MEETING DETAILS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="step-page active" id="step-1">
        <div class="form-panel">
          <div class="panel-header">
            <div class="panel-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            </div>
            <div>
              <div class="panel-title">Meeting Details</div>
              <div class="panel-subtitle">Basic information about the meeting</div>
            </div>
          </div>
          <div class="panel-body">

            <div class="field-row full" style="margin-bottom:18px;">
              <div class="field">
                <label class="field-label" for="meeting-title">Meeting title <span class="required">*</span></label>
                <input type="text" id="meeting-title" class="field-input" placeholder="e.g. Perigon Weekly Team Meeting" autocomplete="off" />
                <span class="field-error" id="err-title">Please enter a meeting title.</span>
              </div>
            </div>

            <div class="field-row">
              <div class="field">
                <label class="field-label" for="meeting-date">Date <span class="required">*</span></label>
                <input type="date" id="meeting-date" class="field-input" />
                <span class="field-error" id="err-date">Please select the meeting date.</span>
              </div>
              <div class="field">
                <label class="field-label" for="meeting-organiser">Organiser <span class="required">*</span></label>
                <input type="text" id="meeting-organiser" class="field-input" placeholder="e.g. Emma Walford" />
                <span class="field-error" id="err-organiser">Please enter the organiser's name.</span>
              </div>
            </div>

            <div class="field-row">
              <div class="field">
                <label class="field-label" for="meeting-start">Start time</label>
                <input type="time" id="meeting-start" class="field-input" />
              </div>
              <div class="field">
                <label class="field-label" for="meeting-end">End time</label>
                <input type="time" id="meeting-end" class="field-input" />
              </div>
            </div>

            <div class="field" style="margin-bottom:18px;">
              <label class="field-label">Meeting type <span class="required">*</span></label>
              <div class="type-toggle">
                <label class="type-option">
                  <input type="radio" name="meeting-type" value="internal" checked />
                  <div class="type-card">
                    <div class="type-card-icon">üè¢</div>
                    <div class="type-card-text">
                      <strong>Internal</strong>
                      <span>Perigon team meeting</span>
                    </div>
                  </div>
                </label>
                <label class="type-option">
                  <input type="radio" name="meeting-type" value="client" />
                  <div class="type-card">
                    <div class="type-card-icon">ü§ù</div>
                    <div class="type-card-text">
                      <strong>Client</strong>
                      <span>External meeting with client</span>
                    </div>
                  </div>
                </label>
              </div>
            </div>

            <div class="field">
              <label class="field-label">Platform <span class="required">*</span></label>
              <div class="platform-grid">
                <label class="platform-option">
                  <input type="radio" name="platform" value="Microsoft Teams" checked />
                  <div class="platform-card">
                    <div class="platform-logo">üí¨</div>
                    <div class="platform-name">Teams</div>
                  </div>
                </label>
                <label class="platform-option">
                  <input type="radio" name="platform" value="Zoom" />
                  <div class="platform-card">
                    <div class="platform-logo">üé•</div>
                    <div class="platform-name">Zoom</div>
                  </div>
                </label>
                <label class="platform-option">
                  <input type="radio" name="platform" value="Google Meet" />
                  <div class="platform-card">
                    <div class="platform-logo">üìπ</div>
                    <div class="platform-name">Meet</div>
                  </div>
                </label>
              </div>
            </div>

            <div class="step-nav">
              <span></span>
              <button class="btn btn-primary" onclick="goToStep(2)">
                Continue ‚Äî Attendees
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STEP 2: ATTENDEES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="step-page" id="step-2">
        <div class="form-panel">
          <div class="panel-header">
            <div class="panel-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
            </div>
            <div>
              <div class="panel-title">Meeting Attendees</div>
              <div class="panel-subtitle">Add everyone who attended ‚Äî names are used for action point attribution</div>
            </div>
          </div>
          <div class="panel-body">

            <div class="callout info">
              <div class="callout-icon">üí°</div>
              <div>Each person will receive an email with a link to the meeting notes and their personal action points. Make sure email addresses are correct.</div>
            </div>

            <div class="field-row" style="margin-bottom:6px;">
              <div class="field-label" style="font-size:12px;color:var(--text-muted);">Full name</div>
              <div class="field-label" style="font-size:12px;color:var(--text-muted);">Email address</div>
            </div>
            <div id="attendees-list" class="attendees-list"></div>

            <button class="add-attendee-btn" onclick="addAttendee()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              Add attendee
            </button>
            <span class="field-error show" id="err-attendees" style="display:none;margin-top:8px;">Please add at least one attendee with a name and email.</span>

            <div class="step-nav">
              <button class="btn btn-ghost" onclick="goToStep(1)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
                Back
              </button>
              <button class="btn btn-primary" onclick="goToStep(3)">
                Continue ‚Äî Transcript
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STEP 3: TRANSCRIPT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="step-page" id="step-3">
        <div class="form-panel">
          <div class="panel-header">
            <div class="panel-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
            </div>
            <div>
              <div class="panel-title">Meeting Transcript</div>
              <div class="panel-subtitle">Paste the raw transcript text from Teams, Zoom, or Google Meet</div>
            </div>
          </div>
          <div class="panel-body">

            <div class="callout warning">
              <div class="callout-icon">‚ö†Ô∏è</div>
              <div>Include speaker labels where possible (e.g. <strong>"Emma: We agreed to‚Ä¶"</strong>) so the AI can correctly attribute action points to the right people.</div>
            </div>

            <div class="field field-row full">
              <label class="field-label" for="transcript">Transcript <span class="required">*</span></label>
              <div class="transcript-wrap">
                <textarea id="transcript" class="field-textarea" style="min-height:320px;" placeholder="Paste your meeting transcript here‚Ä¶

Example format:
Emma Walford: Good morning everyone. Let's start with a quick update on Thornton Capital‚Ä¶
James Hartley: The phase two work is on track, I'll share the draft strategy document by Friday‚Ä¶
Sally Weatherly: I can take the lead on the onboarding documentation review‚Ä¶"></textarea>
                <div class="char-count" id="char-count">0 characters</div>
              </div>
              <span class="field-error" id="err-transcript">Please paste the meeting transcript before continuing.</span>
            </div>

            <div class="step-nav">
              <button class="btn btn-ghost" onclick="goToStep(2)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
                Back
              </button>
              <button class="btn btn-primary" onclick="goToStep(4)">
                Review submission
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STEP 4: REVIEW ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="step-page" id="step-4">
        <div class="form-panel">
          <div class="panel-header">
            <div class="panel-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
            </div>
            <div>
              <div class="panel-title">Review &amp; Submit</div>
              <div class="panel-subtitle">Check everything looks right before generating the notes</div>
            </div>
          </div>
          <div class="panel-body">

            <div id="review-content">
              <!-- populated by JS -->
            </div>

            <div class="callout info" style="margin-top:24px;">
              <div class="callout-icon">‚è±Ô∏è</div>
              <div>Once submitted, the AI will generate branded meeting notes and email them to all attendees within approximately <strong>3‚Äì5 minutes</strong>.</div>
            </div>

            <div class="step-nav">
              <button class="btn btn-ghost" onclick="goToStep(3)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
                Back
              </button>
              <button class="btn btn-submit" id="submit-btn" onclick="submitForm()">
                <div class="spinner" id="submit-spinner"></div>
                <svg id="submit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><polyline points="22 2 15 22 11 13 2 9 22 2"/></svg>
                Generate Meeting Notes
              </button>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- RIGHT: SIDEBAR -->
    <div class="sidebar">
      <div class="summary-card">
        <div class="summary-header">Submission summary</div>
        <div class="summary-body">
          <div class="summary-row">
            <span class="summary-key">Meeting</span>
            <span class="summary-val" id="sum-title"><em class="empty">‚Äî</em></span>
          </div>
          <div class="summary-row">
            <span class="summary-key">Date</span>
            <span class="summary-val" id="sum-date"><em class="empty">‚Äî</em></span>
          </div>
          <div class="summary-row">
            <span class="summary-key">Type</span>
            <span class="summary-val" id="sum-type">Internal</span>
          </div>
          <div class="summary-row">
            <span class="summary-key">Platform</span>
            <span class="summary-val" id="sum-platform">Teams</span>
          </div>
          <div class="summary-row">
            <span class="summary-key">Attendees</span>
            <span class="summary-val" id="sum-attendees"><em class="empty">0</em></span>
          </div>
          <div class="summary-row">
            <span class="summary-key">Transcript</span>
            <span class="summary-val" id="sum-transcript"><em class="empty">Not yet added</em></span>
          </div>
        </div>
      </div>

      <div class="tip-card">
        <strong>üí° Tip</strong>
        Notes will be emailed to all attendees automatically. They'll each receive a personalised link showing their own action points highlighted.
      </div>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ SUCCESS SCREEN ‚îÄ‚îÄ -->
  <div id="success-screen">
    <div class="success-icon">‚úì</div>
    <h2>Transcript submitted successfully</h2>
    <p>The AI is now generating your meeting notes. All attendees will receive an email with a link to the branded notes page in approximately 3‚Äì5 minutes.</p>
    <div class="success-detail" id="success-detail"></div>
    <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
      <a href="/" class="btn btn-ghost">‚Üê Back to dashboard</a>
      <button class="btn btn-primary" onclick="resetForm()">Submit another meeting</button>
    </div>
  </div>

</main>

<script>
/*
  ============================================================
  PERIGON ‚Äî MANUAL TRANSCRIPT SUBMISSION FORM
  ============================================================
  Zapier webhook endpoint. Replace with your actual Zapier
  Catch Hook URL from Zap 1.
  ============================================================
*/
const ZAPIER_WEBHOOK = 'https://hooks.zapier.com/hooks/catch/YOUR_HOOK_ID/YOUR_HOOK_KEY/';

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let currentStep = 1;
let attendeeCount = 0;

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.addEventListener('DOMContentLoaded', () => {
  // Set today's date as default
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('meeting-date').value = today;

  // Start with 3 attendee rows (common team size)
  addAttendee('Emma Walford',     'emma@perigonpartners.co.uk');
  addAttendee('Sally Weatherly', 'sally@perigonpartners.co.uk');
  addAttendee();

  // Live sidebar updates
  document.getElementById('meeting-title').addEventListener('input', updateSidebar);
  document.getElementById('meeting-date').addEventListener('change', updateSidebar);
  document.querySelectorAll('input[name="meeting-type"]').forEach(r => r.addEventListener('change', updateSidebar));
  document.querySelectorAll('input[name="platform"]').forEach(r => r.addEventListener('change', updateSidebar));
  document.getElementById('transcript').addEventListener('input', () => {
    updateCharCount();
    updateSidebar();
  });
});

// ‚îÄ‚îÄ ATTENDEES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function addAttendee(name = '', email = '') {
  attendeeCount++;
  const id = attendeeCount;
  const list = document.getElementById('attendees-list');
  const row = document.createElement('div');
  row.className = 'attendee-row';
  row.id = `attendee-${id}`;
  row.innerHTML = `
    <div class="field">
      <input type="text" class="field-input attendee-name" placeholder="Full name" value="${name}" autocomplete="off" oninput="updateSidebar()" />
    </div>
    <div class="field">
      <input type="email" class="field-input attendee-email" placeholder="email@example.com" value="${email}" autocomplete="off" oninput="updateSidebar()" />
    </div>
    <button class="remove-attendee" onclick="removeAttendee(${id})" title="Remove attendee">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </button>
  `;
  list.appendChild(row);
  updateSidebar();
}

function removeAttendee(id) {
  const row = document.getElementById(`attendee-${id}`);
  if (row) row.remove();
  updateSidebar();
}

function getAttendees() {
  const rows = document.querySelectorAll('.attendee-row');
  return [...rows].map(r => ({
    name:  r.querySelector('.attendee-name').value.trim(),
    email: r.querySelector('.attendee-email').value.trim()
  })).filter(a => a.name || a.email);
}

// ‚îÄ‚îÄ SIDEBAR & LIVE UPDATES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateSidebar() {
  const title     = document.getElementById('meeting-title').value.trim();
  const date      = document.getElementById('meeting-date').value;
  const type      = document.querySelector('input[name="meeting-type"]:checked')?.value || '';
  const platform  = document.querySelector('input[name="platform"]:checked')?.value || '';
  const attendees = getAttendees().filter(a => a.name);
  const transcript = document.getElementById('transcript').value.trim();

  setSum('sum-title',     title      || null);
  setSum('sum-date',      date ? formatDate(date) : null);
  setSum('sum-type',      type === 'internal' ? 'Internal' : 'Client', false);
  setSum('sum-platform',  platform   || null, false);
  setSum('sum-attendees', attendees.length > 0 ? `${attendees.length} person${attendees.length !== 1 ? 's' : ''}` : null);
  setSum('sum-transcript', transcript.length > 0 ? `${transcript.length.toLocaleString()} characters` : null, false, 'Not yet added');
}

function setSum(id, value, canBeEmpty = true, emptyText = '‚Äî') {
  const el = document.getElementById(id);
  if (!el) return;
  if (!value && canBeEmpty) {
    el.innerHTML = `<em class="empty">${emptyText}</em>`;
  } else {
    el.textContent = value || emptyText;
  }
}

function formatDate(dateStr) {
  const d = new Date(dateStr + 'T12:00:00');
  return d.toLocaleDateString('en-GB', { weekday: 'short', day: 'numeric', month: 'long', year: 'numeric' });
}

function updateCharCount() {
  const len = document.getElementById('transcript').value.length;
  const el  = document.getElementById('char-count');
  el.textContent = `${len.toLocaleString()} characters`;
  el.className = 'char-count' + (len > 50000 ? ' warning' : '');
}

// ‚îÄ‚îÄ STEP NAVIGATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function goToStep(n) {
  // Validate before advancing
  if (n > currentStep) {
    if (!validateStep(currentStep)) return;
  }

  // Build review on step 4
  if (n === 4) buildReview();

  // Update DOM
  document.querySelectorAll('.step-page').forEach(p => p.classList.remove('active'));
  document.getElementById(`step-${n}`).classList.add('active');

  // Update progress bar
  for (let i = 1; i <= 4; i++) {
    const prog = document.getElementById(`prog-${i}`);
    prog.classList.remove('active', 'done');
    if (i < n)      prog.classList.add('done');
    else if (i === n) prog.classList.add('active');
  }

  currentStep = n;
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ‚îÄ‚îÄ VALIDATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function validateStep(step) {
  if (step === 1) {
    let ok = true;
    const title = document.getElementById('meeting-title').value.trim();
    const date  = document.getElementById('meeting-date').value;
    const org   = document.getElementById('meeting-organiser').value.trim();

    setError('meeting-title', 'err-title', !title);
    setError('meeting-date',  'err-date',  !date);
    setError('meeting-organiser', 'err-organiser', !org);

    if (!title || !date || !org) ok = false;
    return ok;
  }

  if (step === 2) {
    const attendees = getAttendees();
    const valid = attendees.length >= 1 && attendees.every(a => a.name && isValidEmail(a.email));
    const errEl = document.getElementById('err-attendees');
    errEl.style.display = valid ? 'none' : 'block';

    // Highlight bad rows
    document.querySelectorAll('.attendee-row').forEach(row => {
      const name  = row.querySelector('.attendee-name');
      const email = row.querySelector('.attendee-email');
      const hasName  = name.value.trim();
      const hasEmail = email.value.trim();

      name.classList.toggle('error',  !hasName && (hasEmail || attendees.length === 0));
      email.classList.toggle('error', !isValidEmail(email.value.trim()) && hasName);
    });

    return valid;
  }

  if (step === 3) {
    const t = document.getElementById('transcript').value.trim();
    const ok = t.length > 100;
    document.getElementById('transcript').classList.toggle('error', !ok);
    const errEl = document.getElementById('err-transcript');
    errEl.style.display = ok ? 'none' : 'block';
    return ok;
  }

  return true;
}

function setError(inputId, errorId, hasError) {
  document.getElementById(inputId)?.classList.toggle('error', hasError);
  const errEl = document.getElementById(errorId);
  if (errEl) errEl.style.display = hasError ? 'block' : 'none';
}

function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

// ‚îÄ‚îÄ REVIEW BUILDER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function buildReview() {
  const attendees = getAttendees();
  const startTime = document.getElementById('meeting-start').value;
  const endTime   = document.getElementById('meeting-end').value;
  const timeStr   = startTime ? `${startTime}${endTime ? ' ‚Äì ' + endTime : ''}` : 'Not specified';

  const reviewEl = document.getElementById('review-content');
  reviewEl.innerHTML = `
    <div style="display:grid;gap:12px;">

      <div style="background:var(--input-bg);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
        <div style="padding:10px 16px;background:var(--body-bg);border-bottom:1px solid var(--border);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--text-muted);">Meeting Details</div>
        <div style="padding:16px;">
          <table style="width:100%;border-collapse:collapse;font-size:14px;">
            <tr><td style="padding:5px 0;color:var(--text-muted);width:120px;">Title</td><td style="padding:5px 0;font-weight:500;">${document.getElementById('meeting-title').value}</td></tr>
            <tr><td style="padding:5px 0;color:var(--text-muted);">Date</td><td style="padding:5px 0;">${formatDate(document.getElementById('meeting-date').value)}</td></tr>
            <tr><td style="padding:5px 0;color:var(--text-muted);">Time</td><td style="padding:5px 0;">${timeStr}</td></tr>
            <tr><td style="padding:5px 0;color:var(--text-muted);">Organiser</td><td style="padding:5px 0;">${document.getElementById('meeting-organiser').value}</td></tr>
            <tr><td style="padding:5px 0;color:var(--text-muted);">Type</td><td style="padding:5px 0;">${document.querySelector('input[name="meeting-type"]:checked').value === 'internal' ? 'Internal' : 'Client'}</td></tr>
            <tr><td style="padding:5px 0;color:var(--text-muted);">Platform</td><td style="padding:5px 0;">${document.querySelector('input[name="platform"]:checked').value}</td></tr>
          </table>
        </div>
      </div>

      <div style="background:var(--input-bg);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
        <div style="padding:10px 16px;background:var(--body-bg);border-bottom:1px solid var(--border);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--text-muted);">Attendees (${attendees.length})</div>
        <div style="padding:12px 16px;display:flex;flex-direction:column;gap:8px;">
          ${attendees.map(a => `
            <div style="display:flex;justify-content:space-between;align-items:center;font-size:13px;">
              <span style="font-weight:500;">${a.name}</span>
              <span style="color:var(--text-muted);">${a.email}</span>
            </div>
          `).join('')}
        </div>
      </div>

      <div style="background:var(--input-bg);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
        <div style="padding:10px 16px;background:var(--body-bg);border-bottom:1px solid var(--border);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--text-muted);">Transcript</div>
        <div style="padding:14px 16px;font-size:13px;color:var(--text-mid);">
          ${document.getElementById('transcript').value.length.toLocaleString()} characters ¬∑ approximately ${Math.ceil(document.getElementById('transcript').value.split(/\s+/).length / 130)} minute read
          <div style="margin-top:8px;max-height:80px;overflow:hidden;color:var(--text-light);font-size:12px;line-height:1.5;font-style:italic;">
            "${document.getElementById('transcript').value.slice(0, 200).trim()}‚Ä¶"
          </div>
        </div>
      </div>

    </div>
  `;
}

// ‚îÄ‚îÄ SUBMIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function submitForm() {
  const btn     = document.getElementById('submit-btn');
  const spinner = document.getElementById('submit-spinner');
  const icon    = document.getElementById('submit-icon');

  btn.disabled = true;
  spinner.classList.add('show');
  icon.style.display = 'none';

  const attendees = getAttendees();
  const startTime = document.getElementById('meeting-start').value;
  const endTime   = document.getElementById('meeting-end').value;

  const payload = {
    title:     document.getElementById('meeting-title').value.trim(),
    date:      document.getElementById('meeting-date').value,
    time:      startTime ? `${startTime}${endTime ? ' ‚Äì ' + endTime : ''}` : '',
    type:      document.querySelector('input[name="meeting-type"]:checked').value,
    platform:  document.querySelector('input[name="platform"]:checked').value,
    organiser: document.getElementById('meeting-organiser').value.trim(),
    attendees: attendees.map(a => a.name).join(', '),
    attendee_emails: attendees.map(a => a.email).join(', '),
    attendees_json: JSON.stringify(attendees),
    transcript: document.getElementById('transcript').value.trim(),
    submitted_at: new Date().toISOString(),
    source: 'manual_form'
  };

  try {
    // Fire Zapier webhook
    await fetch(ZAPIER_WEBHOOK, {
      method: 'POST',
      mode: 'no-cors', // Zapier webhooks don't support CORS ‚Äî no-cors is correct here
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    // Show success (no-cors means we can't read the response, but if no error thrown it fired)
    showSuccess(payload);

  } catch (err) {
    console.error('Submission error:', err);
    btn.disabled = false;
    spinner.classList.remove('show');
    icon.style.display = '';
    alert('There was a problem submitting the form. Please check your internet connection and try again. If the problem persists, contact Sally.');
  }
}

function showSuccess(payload) {
  document.getElementById('form-layout').style.display = 'none';
  const successScreen = document.getElementById('success-screen');
  successScreen.style.display = 'block';

  document.getElementById('success-detail').innerHTML = `
    <strong>üìã ${payload.title}</strong><br>
    ${formatDate(payload.date)}${payload.time ? ' ¬∑ ' + payload.time : ''}<br>
    ${payload.platform} ¬∑ ${payload.type === 'internal' ? 'Internal meeting' : 'Client meeting'}<br>
    Notes will be sent to: ${payload.attendees}
  `;

  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function resetForm() {
  document.getElementById('form-layout').style.display = '';
  document.getElementById('success-screen').style.display = 'none';
  document.getElementById('meeting-title').value = '';
  document.getElementById('meeting-organiser').value = '';
  document.getElementById('meeting-start').value = '';
  document.getElementById('meeting-end').value = '';
  document.getElementById('transcript').value = '';
  document.getElementById('attendees-list').innerHTML = '';
  attendeeCount = 0;
  addAttendee();
  goToStep(1);
  updateSidebar();
}
</script>
</body>
</html>
